<!DOCTYPE html>
<html lang="ru">
<html>
<head>
<meta charset="utf-8">
<title>Опрос</title>
</head>
<body>

<h2>Вопрос {{ question.id }}</h2>
<p>Выберите один из вариантов ответа:</p>

<h2>{{ question.question_wording }}</h2>
<form>
    {% csrf_token %}
    {% for answer in answers %}
        <input type="radio" name="answer" value="{{ answer.next_question.id }}" data-answer-solution-id="{{ answer.solution.id }}" data-answer-solution="{{ answer.solution }}"> {{ answer.text }}<br>
    {% endfor %}
    <button onclick="redirect(event)">Ответить</button>
</form>
<button onclick="goBack()">Назад</button>
<button onclick="goHome()">На главную</button>

<script>
    function redirect(event) {
        event.preventDefault();
        var selectedAnswer = document.querySelector('input[name="answer"]:checked').value;
        var selectedAnswerSolution = document.querySelector('input[name="answer"]:checked').dataset.answerSolution;
        var selectedAnswerSolutionId = document.querySelector('input[name="answer"]:checked').dataset.answerSolutionId;
        console.log(selectedAnswerSolutionId)
        if (selectedAnswerSolution == "None") {
            var url = window.location.href.split('/').slice(0, -2).join('/') + "/" + selectedAnswer + "/";
            window.location.href = url;
        } else {
            var url = window.location.href.split('/').slice(0, -4).join('/') + '/solution/' + selectedAnswerSolutionId + '/';
            window.location.href = url;
        }
    }

    function goBack(){
        history.back();
    }

    function goHome(){
        window.location.href = "/";
    }

</script>



</body>
</html>
